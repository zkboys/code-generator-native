(this.webpackJsonp_front=this.webpackJsonp_front||[]).push([[7],{1056:function(e,t,n){"use strict";n.r(t);n(341);var r,a=n(181),o=n(246),i=n(23),c=n(162),l=n(35),s=n.n(l),u=n(160),d=(n(340),n(161)),f=n(43),A=n(2),b=n.n(A),p=n(0),m=n(1134),j=n(1139),x=n(21),h=n(244),O=n(182),g=n(134),v=(n(103),n(28)),y=n(1114),w=(n(213),n(106)),C=(n(571),n(342)),k=(n(573),n(519)),E=n(1132),_=n(569),I=n(1083),P=n(1138),N=n(1106),B=n(575),S=n(8),q=C.a.TabPane,F=Object(h.a)({modal:{title:null,width:"80%",top:50}})((function(e){var t=e.params,n=e.onCancel,r=Object(p.useState)(!1),a=Object(f.a)(r,2),o=a[0],i=a[1],c=Object(p.useState)([]),l=Object(f.a)(c,2),d=l[0],A=l[1],b=Object(p.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.post("/generate/preview",n,{setLoading:i});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]);return Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:n=e.sent,A(n);case 4:case"end":return e.stop()}}),e)})))()}),[b,t]),Object(S.jsx)(x.k,{fitHeight:!0,loading:o,footer:Object(S.jsx)(v.a,{onClick:n,children:"\u5173\u95ed"}),children:Object(S.jsx)(C.a,{type:"card",children:d.map((function(e){var t=e.id,n=e.name,r=e.content;return Object(S.jsx)(q,{tab:n,children:r},t)}))})})})),z=n(1115),T=n.n(z),L=n(1135),U=n(1130),V=n(1131),R=n(1120),K=n.n(R),Y=Object(x.E)(),J=Object(V.b)((function(e){return e.children})),M=Object(V.a)((function(e){return e.children})),D=(r=k.a,function(e){var t=e.columns,n=e.scroll,a=e.className,o=e.onSortEnd,c=Object(p.useState)(0),l=Object(f.a)(c,2),s=l[0],u=l[1],d=t.filter((function(e){return!e.width})).length,A=t.reduce((function(e,t){var n=t.width;return e+(void 0===n?0:n)}),0),m=t.map((function(e){if(e.width)return e;var t=(s-A)/d;return Object(i.a)(Object(i.a)({},e),{},{width:t})})),j=Object(p.useCallback)((function(e){e.oldIndex!==e.newIndex&&o&&o(e)}),[o]);return Object(S.jsx)(U.a,{onResize:function(e){var t=e.width;return u(t)},children:Object(S.jsx)(r,Object(i.a)(Object(i.a)({},e),{},{columns:m,components:{body:function(e){return Object(S.jsx)(M,{onSortEnd:j,helperClass:K.a.row,children:Object(S.jsx)(L.a,{height:n.y,itemCount:e.length,itemSize:50,width:s,children:function(n){var r=n.index,a=n.style;return Object(S.jsx)(J,{index:r,children:Object(S.jsx)("div",{style:a,className:b()(K.a.row),children:m.map((function(n,a){var o=e[r],i=Array.isArray(n.dataIndex)?n.dataIndex.reduce((function(e,t){return e[t]||{}}),o):o[n.dataIndex],c=n.render||function(e){return e},l=a===t.length-1?n.width-Y:n.width,s=c(i,o,r);return Object(S.jsx)("div",{style:{width:l},className:b()(K.a.cell),children:"string"===typeof s?Object(S.jsx)("div",{title:s,className:b()(K.a.text),children:c(i,o,r)}):s},n.key||n.dataIndex)}))})})}})})}},className:b()(b()(K.a.root,a))}))})}),Z=C.a.TabPane,G=Object(h.a)()((function(e){console.log("FieldTable render");var t=e.dbUrl,n=e.tableName,r=e.files,l=e.templateOptions,d=e.form,A=Object(p.useState)([]),m=Object(f.a)(A,2),j=m[0],h=m[1],k=Object(p.useState)(!1),q=Object(f.a)(k,2),z=q[0],L=q[1],U=Object(p.useRef)(null),V=Object(x.R)(U,125,[r]),R=Object(f.a)(V,1)[0],K=Object(p.useState)(null),Y=Object(f.a)(K,2),J=Y[0],M=Y[1],G=Object(p.useState)("type"),H=Object(f.a)(G,2),Q=H[0],W=H[1],X=Object(p.useState)([]),$=Object(f.a)(X,2),ee=$[0],te=$[1],ne=Object(p.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.post("/generate/files",n,{setLoading:L});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),re=Object(p.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.post("/generate/files/exist",n,{setLoading:L});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),ae=Object(p.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/db/types",n,{setLoading:L});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),oe=Object(p.useCallback)((function(e){var t=e.oldIndex,n=e.newIndex;j.splice.apply(j,[n,0].concat(Object(c.a)(j.splice(t,1)))),h(Object(c.a)(j))}),[j]),ie=Object(p.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=j.length,n={id:Object(E.a)(),comment:"\u65b0\u589e\u5217".concat(t+1),chinese:"\u65b0\u589e\u5217".concat(t+1),field:"field".concat(t+1),formType:"input",dataType:"String",__isNew:!0};e?j.push(n):j.unshift(n),h(Object(c.a)(j))}),[j]),ce=Object(p.useCallback)((function(e){var t=j.filter((function(t){return t.id!==e}));h(t)}),[j]),le=Object(p.useCallback)((function(e,t,n,r,a){var o=e.keyCode,i=e.ctrlKey,c=e.shiftKey,l=e.altKey,s=e.metaKey;if(!(i||c||l||s)){var u=38===o,d=39===o,f=40===o||13===o,A=37===o,b=Object(g.c)(e.target);if((!A||b.start)&&(!d||b.end)){var p,m,j=n*a+1,x=(n+1)*a;if(u){if(t===j)return;p=t-1}if(d&&(n===r-1?t===x?(m=!0,p=a+1):p=t-a*n+1:p=t+a),f&&(t===x?(m=!0,p=t+n+1):p=t+1),A){if(t===j&&0===n)return;0===n&&(p=t-1+a*(r-1)),0!==n&&(p=t-a)}m&&ie(!0),setTimeout((function(){var e=document.querySelector("input[tabindex='".concat(p,"']"));e&&(e.focus(),e.select())}))}}}),[ie]),se=Object(p.useMemo)((function(){return(r||[]).filter((function(e){return e.templateId})).map((function(e){var t,n=e.templateId,r=null===(t=l.find((function(e){return e.value===n})))||void 0===t?void 0:t.record;return{title:null===r||void 0===r?void 0:r.shortName,dataIndex:["options",null===r||void 0===r?void 0:r.id],formProps:{type:"tags",options:(null===r||void 0===r?void 0:r.fieldOptions)||[]}}}))}),[r,l]),ue=0,de=j.length,fe=Object(p.useCallback)((function(e){var t;if(null===e||void 0===e||null===(t=e.formProps)||void 0===t||!t.type)return e;var n=["name","type","length","defaultValue","isNullable"],r=e.title,a=e.dataIndex,c=e.width,l=e.formProps,s=Object(o.a)(e,["title","dataIndex","width","formProps"]),u=l.type,d=void 0===u?"input":u,f=l.required,A=void 0!==f&&f,p=l.options,m=void 0===p?[]:p,j="select"===d?"\u8bf7\u9009\u62e9".concat(r):"\u8bf7\u8f93\u5165".concat(r),h=A?c-18:c-8;"switch"===d&&(h="auto"),h||(h="100%");var g,v=["input"].includes(d);return v&&(g=ue++),Object(i.a)(Object(i.a)({title:r,dataIndex:a,width:c},s),{},{render:function(e,t,r){var o,c=t.__isNew;if(n.includes(a)&&!c)return["select","switch"].includes(d)&&(null===m||void 0===m||null===(o=m.find((function(t){return t.value===e})))||void 0===o?void 0:o.label)||e;var s=["dataSource",r,Array.isArray(a)?a:[a]].flat();if("tags"===d)return Object(S.jsx)("div",{className:b()(b()(T.a.element,A&&T.a.required)),children:Object(S.jsx)(x.e,Object(i.a)(Object(i.a)({},l),{},{name:s,style:{width:h},rules:[{required:A,message:"".concat(j,"!")}],children:Object(S.jsx)(O.f,{options:m})}))});var u={};return v&&(u.tabIndex=de*g+r+1,u.onKeyDown=function(e){return le(e,u.tabIndex,g,ue,de)}),Object(S.jsx)("div",{className:b()(b()(T.a.element,A&&T.a.required)),children:Object(S.jsx)(x.e,Object(i.a)(Object(i.a)(Object(i.a)({},l),u),{},{name:s,style:{width:h},rules:[{required:A,message:"".concat(j,"!")}],placeholder:j}))})}})}),[ue,le,de]),Ae=Object(p.useMemo)((function(){return[{key:"type",tab:"\u7c7b\u578b&\u9a8c\u8bc1",columns:[{title:"\u6570\u636e\u7c7b\u578b",dataIndex:"dataType",width:150,formProps:{type:"select",options:B.DATA_TYPE_OPTIONS}},{title:"\u8868\u5355\u7c7b\u578b",dataIndex:"formType",width:150,formProps:{type:"select",options:B.FORM_ELEMENT_OPTIONS}},{title:"\u6821\u9a8c\u89c4\u5219",dataIndex:"validation",formProps:{type:"select",mode:"multiple",options:B.VALIDATE_OPTIONS}}]},{key:"options",tab:"\u6a21\u677f\u9009\u9879",columns:Object(c.a)(se)}]}),[se]),be=Object(p.useMemo)((function(){var e="options"===Q,t=Ae.find((function(e){return e.key===Q})).columns.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{className:T.a.tabColumn})}));return[{title:"\u64cd\u4f5c",dataIndex:"operator",width:60,render:function(e,t){var n=t.id,r=t.name,a=[{label:"\u5220\u9664",color:"red",confirm:{title:'\u60a8\u786e\u5b9a\u5220\u9664"'.concat(r,'"?'),onConfirm:function(){return ce(n)}}}];return Object(S.jsx)(x.l,{items:a})}},{title:"\u5b57\u6bb5",dataIndex:"name",width:150,formProps:{type:"input",required:!0}},{title:"\u5907\u6ce8",dataIndex:"comment",width:150,formProps:{type:"input",required:!0}},!e&&{title:"\u7c7b\u578b",dataIndex:"type",width:150,formProps:{type:"select",required:!0,options:ee}},!e&&{title:"\u957f\u5ea6",dataIndex:"length",width:85,formProps:{type:"number",min:0,step:1}},!e&&{title:"\u9ed8\u8ba4\u503c",dataIndex:"defaultValue",width:150,formProps:{type:"input"}},!e&&{title:"\u53ef\u4e3a\u7a7a",dataIndex:"isNullable",width:60,formProps:{type:"switch",options:[{value:!0,label:"\u662f"},{value:!1,label:"\u5426"}]}}].concat(Object(c.a)(t)).filter(Boolean).map((function(e){return fe(e)}))}),[Q,ee,ce,fe,Ae]),pe=Object(p.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,a,o,i,c,l,u,f,A,b=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]&&b[0],e.prev=1,null!==j&&void 0!==j&&j.length){e.next=4;break}return e.abrupt("return",w.a.info({title:"\u6e29\u99a8\u63d0\u793a",content:"\u8868\u683c\u7684\u5b57\u6bb5\u914d\u7f6e\u4e0d\u80fd\u4e3a\u7a7a\uff01"}));case 4:return e.next=6,d.validateFields();case 6:if(n=e.sent,r=n.files,a=n.moduleName,o={moduleName:a,files:r,config:j},!t){e.next=13;break}M(o),e.next=41;break;case 13:return e.next=15,re({files:r});case 15:if(e.t0=e.sent,e.t0){e.next=18;break}e.t0=[];case 18:i=e.t0,c=Object(y.a)(i),e.prev=20,u=s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.value,n=r.find((function(e){return e.targetPath===t})),e.prev=2,e.next=5,Object(x.r)({width:600,title:"\u6587\u4ef6\u5df2\u5b58\u5728",content:t,okText:"\u8986\u76d6",okButtonProps:{danger:!0}});case 5:n.rewrite=!0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n.rewrite=!1;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})),c.s();case 23:if((l=c.n()).done){e.next=27;break}return e.delegateYield(u(),"t1",25);case 25:e.next=23;break;case 27:e.next=32;break;case 29:e.prev=29,e.t2=e.catch(20),c.e(e.t2);case 32:return e.prev=32,c.f(),e.finish(32);case 35:return e.next=37,ne(o);case 37:if(null!==(f=e.sent)&&void 0!==f&&f.length){e.next=40;break}return e.abrupt("return",w.a.info({title:"\u6e29\u99a8\u63d0\u793a",content:"\u672a\u751f\u6210\u4efb\u4f55\u6587\u4ef6\uff01"}));case 40:w.a.success({width:600,title:"\u751f\u6210\u6587\u4ef6\u5982\u4e0b",content:Object(S.jsx)("div",{children:f.map((function(e){return Object(S.jsx)("div",{children:e},e)}))})});case 41:e.next=48;break;case 43:if(e.prev=43,e.t3=e.catch(1),null===e.t3||void 0===e.t3||null===(A=e.t3.errorFields)||void 0===A||!A.length){e.next=47;break}return e.abrupt("return",w.a.info({title:"\u6e29\u99a8\u63d0\u793a",content:"\u8868\u5355\u586b\u5199\u6709\u8bef\uff0c\u8bf7\u68c0\u67e5\u540e\u518d\u63d0\u4ea4\uff01"}));case 47:console.error(e.t3);case 48:case"end":return e.stop()}}),e,null,[[1,43],[20,29,32,35]])}))),[d,j,re,ne]),me=Object(p.useCallback)(Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(x.r)("\u672c\u5730\u540c\u540d\u6a21\u7248\u5c06\u88ab\u8986\u76d6\uff0c\u662f\u5426\u7ee7\u7eed\uff1f");case 2:return t.next=4,e.ajax.get("/templates/local/download",null,{successTip:"\u66f4\u65b0\u6210\u529f\uff01"});case 4:case"end":return t.stop()}}),t)}))),[e.ajax]);return Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae({dbUrl:t});case 2:n=e.sent,te(n);case 4:case"end":return e.stop()}}),e)})))()}),[t,ae]),Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function r(){var a;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t&&n){r.next=2;break}return r.abrupt("return",h([]));case 2:return r.next=4,e.ajax.get("/db/tables/".concat(n),{dbUrl:t},{errorTip:!1,setLoading:L});case 4:a=r.sent,h(a);case 6:case"end":return r.stop()}}),r)})))()}),[t,n,e.ajax]),Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se.forEach((function(e){var n=Object(f.a)(e.dataIndex,2)[1],r=Object(c.a)(e.formProps.options);j.forEach((function(e){e.options||(e.options={}),e.options[n]||(e.options[n]=Object(c.a)(r),t=!0)}))})),h(t?Object(c.a)(j):j);case 2:case"end":return e.stop()}}),e)})))()}),[j,se]),Object(p.useEffect)((function(){return d.setFieldsValue({dataSource:j})}),[d,j]),Object(S.jsxs)(x.c,{loading:z,ref:U,className:b()(T.a.root),children:[Object(S.jsx)(x.e,{noStyle:!0,shouldUpdate:!0,children:function(e){((0,e.getFieldValue)("dataSource")||[]).forEach((function(e){var t=j.find((function(t){return t.id===e.id}));t&&Object.entries(e).forEach((function(e){var n=Object(f.a)(e,2),r=n[0],a=n[1];t[r]=a}))}))}}),Object(S.jsx)(C.a,{tabBarExtraContent:{left:Object(S.jsxs)(a.b,{style:{marginRight:16},children:[Object(S.jsx)(v.a,{icon:Object(S.jsx)(_.a,{}),type:"primary",ghost:!0,onClick:function(){return ie()},children:"\u6dfb\u52a0\u4e00\u884c"}),Object(S.jsx)(v.a,{icon:Object(S.jsx)(I.a,{}),onClick:function(){return pe(!0)},children:"\u4ee3\u7801\u9884\u89c8"}),Object(S.jsx)(v.a,{type:"primary",danger:!0,icon:Object(S.jsx)(P.a,{}),onClick:function(){return pe()},children:"\u751f\u6210\u6587\u4ef6"})]}),right:Object(S.jsx)(v.a,{icon:Object(S.jsx)(N.a,{}),onClick:me,children:"\u66f4\u65b0\u672c\u5730\u6a21\u7248"})},activeKey:Q,onChange:W,children:Ae.map((function(e){return Object(S.jsx)(Z,{tab:e.tab},e.key)}))}),Object(S.jsx)(D,{onSortEnd:oe,size:"small",columns:be,pagination:!1,dataSource:j,rowKey:"id",scroll:{y:R}}),Object(S.jsx)(F,{visible:!!J,params:J,onOk:function(){return M(null)},onCancel:function(){return M(null)}})]})})),H=n(1122),Q=n.n(H);t.default=Object(h.a)({path:"/",title:"\u9996\u9875"})((function(e){var t=Object(p.useState)([]),n=Object(f.a)(t,2),r=n[0],l=n[1],A=Object(p.useState)([]),h=Object(f.a)(A,2),v=h[0],y=h[1],w=Object(p.useState)({}),C=Object(f.a)(w,2),k=C[0],E=C[1],_=d.a.useForm(),I=Object(f.a)(_,1)[0],P=Object(p.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/db/tables",{dbUrl:n},{errorTip:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),N=Object(p.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/moduleNames/".concat(n),null,{errorTip:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),B=Object(p.useCallback)(Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/templates",null,{errorTip:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),[e.ajax]),q=Object(p.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.target.value,x.N.local.setItem("dbUrl",r),e.next=5,P(r);case 5:a=e.sent,n=a.map((function(e){return{value:e.name,label:e.name}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n=[];case 12:l(n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[P]),F=Object(p.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:n=e.sent,E(n),I.setFieldsValue({moduleName:n["module-name"]});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N,I]),z=Object(p.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,N(n);case 5:r=e.sent,E(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]),T=Object(p.useCallback)((function(){var e=I.getFieldValue("files"),t=["jsx","tsx","vue","vux","html"];return e.some((function(e){var n=e.targetPath.split(".").pop();return t.includes(n)}))}),[I]),L=Object(p.useCallback)((function(e,t){var n=v.find((function(e){return e.value===t})).record,r=n.targetPath,a=n.options,o=I.getFieldValue("files"),l=I.getFieldValue(["files",e]);l.targetPath=r,l.options=Object(c.a)(a),o[e]=l,I.setFieldsValue({files:Object(c.a)(o)}),E(Object(i.a)({},k))}),[I,v,k]),U=Object(p.useCallback)((function(){Object(g.g)()}),[]);Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:t=e.sent,n=t.map((function(e){return{record:e,value:e.id,label:e.name}})),y(n),r=t.map((function(e){return{templateId:e.id,targetPath:e.targetPath,options:Object(c.a)(e.options||[])}})),I.setFieldsValue({files:r});case 7:case"end":return e.stop()}}),e)})))()}),[B,I,T]),Object(p.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.N.local.getItem("dbUrl")){e.next=3;break}return e.abrupt("return");case 3:return I.setFieldsValue({dbUrl:t}),e.next=6,q({target:{value:t}});case 6:case"end":return e.stop()}}),e)})))()}),[I,q]),Object(p.useEffect)((function(){var e=(I.getFieldValue("files")||[]).map((function(e){if(e.targetPath){var t=v.find((function(t){return t.value===e.templateId})).record;e.targetPath=Object(g.d)(t.targetPath,k)}return Object(i.a)({},e)}));I.setFieldsValue({files:e})}),[I,k,v]);var V={};return console.log("index render"),Object(S.jsx)(x.m,{className:b()(Q.a.root),children:Object(S.jsxs)(d.a,{style:{marginBottom:8},form:I,layout:"inline",initialValues:{files:[{}]},onValuesChange:U,className:b()(Q.a.query),children:[Object(S.jsx)(x.e,Object(i.a)(Object(i.a)({},V),{},{labelCol:{flex:"100px"},style:{width:300},align:"right",label:"\u6570\u636e\u5e93",name:"dbUrl",placeholder:"mysql://username:password@host:port/database",onChange:q,tooltip:"\u652f\u6301mysql\u3001oracle"})),Object(S.jsx)(x.e,Object(i.a)(Object(i.a)({},V),{},{labelCol:{flex:"100px"},style:{width:308},type:"select",showSearch:!0,label:"\u6570\u636e\u5e93\u8868",name:"tableName",onChange:F,options:r})),Object(S.jsx)(x.e,Object(i.a)(Object(i.a)({},V),{},{labelCol:{flex:"91px"},style:{width:200},label:"\u6a21\u5757\u540d",name:"moduleName",placeholder:"\u6bd4\u5982\uff1auser-center",onBlur:z,required:!0})),Object(S.jsx)("div",{style:{width:"100%",marginTop:8},children:Object(S.jsx)(d.a.List,{name:"files",children:function(e,t){var n=t.add,r=t.remove;return Object(S.jsx)(S.Fragment,{children:e.map((function(t,c){var l=t.key,s=t.name,u=(t.isListField,Object(o.a)(t,["key","name","isListField"])),d=c===e.length-1,f=c+1,A=f;return 0===c&&(A="\u6587\u4ef6".concat(f)),Object(S.jsxs)("div",{className:b()(Q.a.fileRow),children:[Object(S.jsxs)(a.b,{className:b()(Q.a.fileOperator),children:[(null===e||void 0===e?void 0:e.length)>1&&Object(S.jsx)(m.a,{onClick:function(){return r(s)},className:b()(Q.a.fileMinus)}),d&&e.length<v.length&&Object(S.jsx)(j.a,{onClick:function(){return n({})},className:b()(Q.a.filePlus)})]}),Object(S.jsx)(x.e,{noStyle:!0,shouldUpdate:!0,children:function(e){var t=e.getFieldValue,n=t("files"),r=t(["files",s,"templateId"]),a=v.filter((function(e){return r===e.value||!n.find((function(t){return t.templateId===e.value}))}));return Object(S.jsx)("div",{style:{width:318},children:Object(S.jsx)(x.e,Object(i.a)(Object(i.a)(Object(i.a)({},V),u),{},{labelCol:{flex:"100px",style:{userSelect:"none"}},style:{width:200},label:A,name:[s,"templateId"],required:!0,options:a,placeholder:"\u8bf7\u9009\u62e9\u6a21\u677f",onChange:function(e){return L(s,e)}}))})}}),Object(S.jsx)(x.e,Object(i.a)(Object(i.a)(Object(i.a)({},V),u),{},{style:{width:400},label:"\u76ee\u6807\u4f4d\u7f6e",name:[s,"targetPath"],required:!0,rules:[{validator:function(e,t){if(!t)return Promise.resolve();var n=I.getFieldValue("files");return n.findIndex((function(e){return e.targetPath===t}))!==n.findLastIndex((function(e){return e.targetPath===t}))?Promise.reject("\u4e0d\u80fd\u4f7f\u7528\u76f8\u540c\u7684\u76ee\u6807\u6587\u4ef6\uff01\u8bf7\u4fee\u6539"):Promise.resolve()}}]})),Object(S.jsx)(x.e,{noStyle:!0,shouldUpdate:!0,children:function(e){var t,n=(0,e.getFieldValue)(["files",s,"templateId"]),r=null===(t=v.find((function(e){return e.value===n})))||void 0===t?void 0:t.record,a=(null===r||void 0===r?void 0:r.options)||[];return Object(S.jsx)(x.e,Object(i.a)(Object(i.a)(Object(i.a)({},V),u),{},{name:[s,"options"],children:Object(S.jsx)(O.f,{options:a})}))}})]},l)}))})}})}),Object(S.jsx)(x.e,{shouldUpdate:function(e,t){return["dbUrl","tableName","moduleName","files"].some((function(n){return(null===e||void 0===e?void 0:e[n])!==(null===t||void 0===t?void 0:t[n])}))},noStyle:!0,children:function(e){var t=(0,e.getFieldsValue)(),n=t.dbUrl,r=t.tableName,a=t.files;return Object(S.jsx)(G,{form:I,dbUrl:n,tableName:r,files:a,templateOptions:v})}})]})})}))},1115:function(e,t,n){var r=n(139),a=n(1116);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},1116:function(e,t,n){"use strict";n.r(t);var r=n(73),a=n.n(r)()(!0);a.push([e.i,".root_22AK4 {\n  background-color: #fafafa;\n}\n.root_22AK4 .front-form-item {\n  margin: 0 !important;\n}\n.root_22AK4 .front-tabs-nav {\n  margin-bottom: 0;\n}\n.root_22AK4 .front-form-item {\n  margin-bottom: 0;\n}\n.root_22AK4 tbody > tr {\n  cursor: move;\n}\n.element_24b-h {\n  position: relative;\n  box-sizing: border-box;\n  width: 100%;\n}\n.element_24b-h.required_1cZgn {\n  padding-left: 10px;\n}\n.element_24b-h.required_1cZgn:before {\n  position: absolute;\n  display: inline-block;\n  left: 0;\n  top: 10px;\n  color: #ff4d4f;\n  font-size: 14px;\n  font-family: SimSun, sans-serif;\n  line-height: 1;\n  content: '*';\n}\n.tabColumn_ihqDw {\n  background: rgba(24, 144, 255, 0.05);\n}\n.helper_qLOjP {\n  display: table-row;\n}\n.helper_qLOjP td {\n  border-bottom: 1px solid #f0f0f0;\n  border-top: 1px solid #f0f0f0;\n  padding: 8px;\n  display: table-cell;\n  vertical-align: center;\n  background: #fff;\n  width: 10000px;\n  border-collapse: collapse;\n}\n.helper_qLOjP .front-form-item_2EPyJ {\n  margin-bottom: 0;\n}\n","",{version:3,sources:["webpack://src/pages/home/field-table/style.less","webpack://src/theme.less"],names:[],mappings:"AAEA;EACI,yBAAA;AAIJ;AALA;EAKY,oBAAA;AAGZ;AARA;EASY,gBAAA;AAEZ;AAXA;EAaY,gBAAA;AACZ;AAdA;EAkBQ,YAAA;AADR;AAKA;EACI,kBAAA;EACA,sBAAA;EACA,WAAA;AAHJ;AAKI;EACI,kBAAA;AAHR;AAMI;EACI,kBAAA;EACA,qBAAA;EACA,OAAA;EACA,SAAA;EACA,cAAA;EACA,eAAA;EACA,+BAAA;EACA,cAAA;EACA,YAAA;AAJR;AAQA;EACI,oCAAA;AANJ;AASA;EACI,kBAAA;AAPJ;AAUA;EACI,gCAAA;EACA,6BAAA;EACA,YAAA;EACA,mBAAA;EACA,sBAAA;EACA,gBAAA;EACA,cAAA;EACA,yBAAA;AARJ;ACtDC;EDkEG,gBAAA;AATJ",sourcesContent:["@import 'src/theme';\n\n.root {\n    background-color: #fafafa;\n\n    :global {\n        .@{ant-prefix}-form-item {\n            margin: 0 !important;\n        }\n\n        .@{ant-prefix}-tabs-nav {\n            margin-bottom: 0;\n        }\n\n        .@{ant-prefix}-form-item {\n            margin-bottom: 0;\n        }\n    }\n\n    tbody > tr {\n        cursor: move;\n    }\n}\n\n.element {\n    position: relative;\n    box-sizing: border-box;\n    width: 100%;\n\n    &.required {\n        padding-left: 10px;\n    }\n\n    &.required:before {\n        position: absolute;\n        display: inline-block;\n        left: 0;\n        top: 10px;\n        color: #ff4d4f;\n        font-size: 14px;\n        font-family: SimSun, sans-serif;\n        line-height: 1;\n        content: '*';\n    }\n}\n\n.tabColumn {\n    background: rgba(24, 144, 255, .05);\n}\n\n.helper {\n    display: table-row;\n}\n\n.helper td {\n    border-bottom: 1px solid #f0f0f0;\n    border-top: 1px solid #f0f0f0;\n    padding: 8px;\n    display: table-cell;\n    vertical-align: center;\n    background: #fff;\n    width: 10000px;\n    border-collapse: collapse;\n}\n\n.helper .@{ant-prefix}-form-item {\n    margin-bottom: 0;\n}\n\n\n@packageName: front;","// \u6837\u5f0f\u524d\u7f00\uff0c\u505a\u5fae\u524d\u7aef\uff0c\u9632\u6b62\u5404\u4e2a\u7cfb\u7edf\u6837\u5f0f\u51b2\u7a81\u65f6\uff0c\u5404\u4e2a\u7cfb\u7edf\u4fee\u6539\u4e3a\u4e0d\u540c\u7684\u503c\n@packageName: ''; // lessLoader \u4f1a\u6539\u4e3a package.json name\u5c5e\u6027\n@ant-prefix: ~'@{packageName}';\n@ra-lib-prefix: ~'@{packageName}-ra';\n\n// \u81ea\u5b9a\u4e49\u53d8\u91cf\n//@page-content-margin: 0;\n//@page-content-padding: 0;\n//@content-margin: 0px;\n//@content-padding: 8px;\n//@layout-z-index: 999;\n//@layout-transition-duration: 0;\n\n// ant \u5b98\u65b9\u53d8\u91cf\n// https://github.com/ant-design/ant-design/blob/master/components/style/themes/default.less\n@border-color-base: hsv(0, 0, 85%);\n@font-size-base: 14px;\n\n//@primary-color: #42b983;\n//@layout-header-background: #42b983;\n//@menu-dark-inline-submenu-bg: #349368;\n\n@primary-color: #1890ff; // \u4e3b\u9898\u8272\n@layout-header-background: #001529; // \u5934\u90e8\u80cc\u666f\u8272\n@menu-dark-inline-submenu-bg: #000c17; // \u83dc\u5355\u80cc\u666f\u8272\n\n// \u5b57\u4f53\u989c\u8272\n@text-color: fade(#000, 65%);\n@body-background: #f0f2f5;\n\n:export {\n    antPrefix: @ant-prefix;\n    raLibPrefix: @ra-lib-prefix;\n    primaryColor: @primary-color;\n}\n"],sourceRoot:""}]),a.locals={antPrefix:"front",raLibPrefix:"front-ra",primaryColor:"#1890ff",root:"root_22AK4",element:"element_24b-h",required:"required_1cZgn",tabColumn:"tabColumn_ihqDw",helper:"helper_qLOjP","front-form-item":"front-form-item_2EPyJ"},t.default=a},1120:function(e,t,n){var r=n(139),a=n(1121);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},1121:function(e,t,n){"use strict";n.r(t);var r=n(73),a=n.n(r)()(!0);a.push([e.i,".root_3H-yq .front-table-container:before,\n.root_3H-yq .front-table-container:after {\n  display: none;\n}\n.row_OlUvz {\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid #e8e8e8;\n  background: #FFF;\n  box-sizing: border-box;\n  cursor: move;\n}\n.row_OlUvz .front-form-item {\n  margin: 0 !important;\n  position: relative;\n}\n.row_OlUvz .front-form-item-explain {\n  position: absolute;\n  bottom: -21px;\n  z-index: 10;\n}\n.cell_3GMOg {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  padding: 0 4px;\n  width: 0;\n  box-sizing: border-box;\n}\n.cell_3GMOg .text_30g6_ {\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n","",{version:3,sources:["webpack://src/pages/home/field-table/virtual-table.less"],names:[],mappings:"AAEA;;EAIY,aAAA;AAEZ;AAOA;EACI,aAAA;EACA,mBAAA;EACA,gCAAA;EACA,gBAAA;EACA,sBAAA;EACA,YAAA;AALJ;AADA;EAUY,oBAAA;EACA,kBAAA;AANZ;AALA;EAeY,kBAAA;EACA,aAAA;EACA,WAAA;AAPZ;AAYA;EACI,YAAA;EACA,aAAA;EACA,mBAAA;EACA,cAAA;EACA,QAAA;EACA,sBAAA;AAVJ;AAIA;EASQ,WAAA;EACA,gBAAA;EACA,uBAAA;EACA,mBAAA;AAVR",sourcesContent:["@import 'src/theme';\n\n.root {\n    :global {\n        .@{ant-prefix}-table-container:before,\n        .@{ant-prefix}-table-container:after {\n            display: none;\n        }\n\n        //\n        //.@{ant-prefix}-table-cell {\n        //}\n    }\n}\n\n.row {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #e8e8e8;\n    background: #FFF;\n    box-sizing: border-box;\n    cursor: move;\n\n    :global {\n        .@{ant-prefix}-form-item {\n            margin: 0 !important;\n            position: relative;\n        }\n\n        .@{ant-prefix}-form-item-explain {\n            position: absolute;\n            bottom: -21px;\n            z-index: 10;\n        }\n    }\n}\n\n.cell {\n    height: 100%;\n    display: flex;\n    align-items: center;\n    padding: 0 4px;\n    width: 0;\n    box-sizing: border-box;\n\n    .text {\n        width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n}\n\n@packageName: front;"],sourceRoot:""}]),a.locals={antPrefix:"front",raLibPrefix:"front-ra",primaryColor:"#1890ff",root:"root_3H-yq",row:"row_OlUvz",cell:"cell_3GMOg",text:"text_30g6_"},t.default=a},1122:function(e,t,n){var r=n(139),a=n(1123);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};r(a,o);e.exports=a.locals||{}},1123:function(e,t,n){"use strict";n.r(t);var r=n(73),a=n.n(r)()(!0);a.push([e.i,".query_39zez .front-form-item {\n  margin-bottom: 6px;\n}\n.query_39zez .front-form-item-explain {\n  position: absolute;\n  margin-top: -3px;\n  z-index: 10;\n}\n.fileRow_KjD5F {\n  display: flex;\n  align-items: center;\n  padding-top: 7px;\n  background: #eee;\n  position: relative;\n}\n.fileMinus_17Owl {\n  color: red;\n}\n.filePlus_2owcT {\n  color: green;\n}\n.fileOperator_DiSbC {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  left: 10px;\n  top: -4px;\n  height: 100%;\n  z-index: 10;\n}\n","",{version:3,sources:["webpack://src/pages/home/style.less"],names:[],mappings:"AAKA;EAGY,kBAAA;AADZ;AAFA;EAOY,kBAAA;EACA,gBAAA;EACA,WAAA;AAFZ;AAOA;EACI,aAAA;EACA,mBAAA;EACA,gBAAA;EACA,gBAAA;EACA,kBAAA;AALJ;AAQA;EACI,UAAA;AANJ;AASA;EACI,YAAA;AAPJ;AAUA;EACI,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,UAAA;EACA,SAAA;EACA,YAAA;EACA,WAAA;AARJ",sourcesContent:['@import "src/theme.less";\n\n.root {\n}\n\n.query {\n    :global {\n        .@{ant-prefix}-form-item {\n            margin-bottom: 6px;\n        }\n\n        .@{ant-prefix}-form-item-explain {\n            position: absolute;\n            margin-top: -3px;\n            z-index: 10;\n        }\n    }\n}\n\n.fileRow {\n    display: flex;\n    align-items: center;\n    padding-top: 7px;\n    background: #eee;\n    position: relative;\n}\n\n.fileMinus {\n    color: red;\n}\n\n.filePlus {\n    color: green;\n}\n\n.fileOperator {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    left: 10px;\n    top: -4px;\n    height: 100%;\n    z-index: 10;\n}\n\n@packageName: front;'],sourceRoot:""}]),a.locals={antPrefix:"front",raLibPrefix:"front-ra",primaryColor:"#1890ff",query:"query_39zez",fileRow:"fileRow_KjD5F",fileMinus:"fileMinus_17Owl",filePlus:"filePlus_2owcT",fileOperator:"fileOperator_DiSbC"},t.default=a}}]);
//# sourceMappingURL=7.51a2a666.chunk.js.map