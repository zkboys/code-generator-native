(this.webpackJsonp_front=this.webpackJsonp_front||[]).push([[16],{957:function(e,t,a){"use strict";a.r(t);a(323);var n=a(175),r=(a(1014),a(1012)),c=(a(113),a(36)),s=(a(383),a(190)),i=(a(204),a(99)),u=a(38),o=a.n(u),l=a(21),j=a(155),b=(a(322),a(156)),d=a(39),p=a(0),O=a(19),x=a(234),f=a(989),m=a(11);t.default=Object(x.a)({path:"/department_users2"})((function(e){var t=Object(p.useState)(!1),a=Object(d.a)(t,2),u=a[0],x=a[1],h=Object(p.useState)(1),v=Object(d.a)(h,2),g=v[0],k=v[1],w=Object(p.useState)(20),y=Object(d.a)(w,2),C=y[0],S=y[1],_=Object(p.useState)([]),N=Object(d.a)(_,2),L=N[0],T=N[1],F=Object(p.useState)(0),z=Object(d.a)(F,2),E=z[0],I=z[1],H=Object(p.useState)(null),J=Object(d.a)(H,2),K=J[0],P=J[1],R=Object(p.useState)(!1),U=Object(d.a)(R,2),V=U[0],q=U[1],A=Object(p.useState)([]),B=Object(d.a)(A,2),D=B[0],G=B[1],M=Object(p.useState)(!1),Q=Object(d.a)(M,2),W=Q[0],X=Q[1],Y=b.a.useForm(),Z=Object(d.a)(Y,1)[0],$=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u542f\u7528",dataIndex:"enabled"},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u64cd\u4f5c",dataIndex:"operator",width:100,render:function(e,t){var a=t.id,n=t.name,r=[{label:"\u7f16\u8f91",onClick:function(){return P(t)||q(!0)}},{label:"\u5220\u9664",color:"red",confirm:{title:"\u60a8\u786e\u5b9a\u5220\u9664\u300c".concat(n,"\u300d\u5417\uff1f"),onConfirm:function(){return ce(a)}}}];return Object(m.jsx)(O.l,{items:r})}}],ee=Object(p.useCallback)(Object(j.a)(o.a.mark((function t(){var a,n,r,c,s,i,u=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:{},t.next=3,Z.validateFields();case 3:return n=t.sent,r=Object(l.a)(Object(l.a)({},n),{},{pageNum:a.pageNum||g,pageSize:a.pageSize||C}),t.next=7,e.ajax.get("/department_users",r,{setLoading:x});case 7:c=t.sent,s=(null===c||void 0===c?void 0:c.content)||[{id:1},{id:2}],i=(null===c||void 0===c?void 0:c.totalElements)||0,T(s),I(i);case 12:case"end":return t.stop()}}),t)}))),[Z,g,C,e.ajax]),te=Object(p.useCallback)((function(){P(null),q(!0)}),[]),ae=Object(p.useCallback)(Object(j.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==D&&void 0!==D&&D.length){t.next=2;break}return t.abrupt("return",i.a.info({title:"\u6e29\u99a8\u63d0\u793a",content:"\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u6570\u636e\uff01"}));case 2:return t.next=4,e.ajax.del("/department_users",{ids:D},{setLoading:x,successTip:"\u5220\u9664\u6210\u529f\uff01"});case 4:return t.next=6,ee();case 6:case"end":return t.stop()}}),t)}))),[ee,e.ajax,D]),ne=Object(p.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("uploading"===t.file.status&&X(!0),"done"!==t.file.status){e.next=6;break}return X(!1),s.a.success({message:"\u5bfc\u5165\u6210\u529f\uff01",duration:2}),e.next=6,ee();case 6:"error"===t.file.status&&(X(!1),s.a.error({message:"\u5bfc\u5165\u5931\u8d25\uff01",duration:2}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ee]),re=Object(p.useCallback)(Object(j.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.validateFields();case 2:return a=t.sent,t.next=5,e.ajax.download("/department_users/export",a);case 5:case"end":return t.stop()}}),t)}))),[Z,e.ajax]),ce=Object(p.useCallback)(function(){var t=Object(j.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.del("/department_users/".concat(a),null,{setLoading:x,successTip:"\u5220\u9664\u6210\u529f\uff01"});case 2:return t.next=4,ee();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[ee,e.ajax]);Object(p.useEffect)((function(){Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({pageNum:1});case 2:case"end":return e.stop()}}),e)})))()}),[]);return Object(m.jsxs)(O.m,{loading:u||W,children:[Object(m.jsx)(O.o,{children:Object(m.jsxs)(b.a,{layout:"inline",form:Z,onFinish:Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(1),e.next=3,ee({pageNum:1});case 3:case"end":return e.stop()}}),e)}))),children:[Object(m.jsx)(O.e,Object(l.a)(Object(l.a)({},{wrapperCol:{style:{width:200}}}),{},{label:"\u89d2\u8272\u540d\u79f0",name:"name"})),Object(m.jsx)(O.e,{children:Object(m.jsxs)(n.b,{children:[Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"}),Object(m.jsx)(c.a,{htmlType:"reset",children:"\u91cd\u7f6e"}),Object(m.jsx)(c.a,{type:"primary",onClick:te,children:"\u6dfb\u52a0"}),Object(m.jsx)(c.a,{type:"primary",danger:!0,onClick:ae,children:"\u6279\u91cf\u5220\u9664"}),Object(m.jsx)(r.a,{name:"file",accept:".xlsx,.xls",action:"/api/department_users/import",showUploadList:!1,headers:{},onChange:ne,children:Object(m.jsx)(c.a,{type:"primary",ghost:!0,children:"\u5bfc\u5165"})}),Object(m.jsx)(c.a,{onClick:re,children:"\u5bfc\u51fa"})]})})]})}),Object(m.jsx)(O.p,{serialNumber:!0,pageNum:g,pageSize:C,fitHeight:!0,dataSource:L,columns:$,rowKey:"id",rowSelection:{selectedRowKeys:D,onChange:function(e){return G(e)}}}),Object(m.jsx)(O.n,{total:E,pageNum:g,pageSize:C,onPageNumChange:function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t),e.next=3,ee({pageNum:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPageSizeChange:function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(1),S(t),e.next=4,ee({pageNum:1,pageSize:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(m.jsx)(f.a,{visible:V,isEdit:!!K,record:K,onOk:Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!1),e.next=3,ee();case 3:case"end":return e.stop()}}),e)}))),onCancel:function(){return q(!1)}})]})}))},989:function(e,t,a){"use strict";a(973);var n=a(975),r=(a(974),a(976)),c=a(38),s=a.n(c),i=a(21),u=a(155),o=(a(322),a(156)),l=a(39),j=a(0),b=a(19),d=a(234),p=a(11);t.a=Object(d.a)({modal:{title:function(e){return e.isEdit?"\u7f16\u8f91":"\u521b\u5efa"},width:"70%",top:50}})((function(e){var t=e.record,a=e.isEdit,c=e.onOk,d=Object(j.useState)(!1),O=Object(l.a)(d,2),x=O[0],f=O[1],m=o.a.useForm(),h=Object(l.a)(m,1)[0],v=Object(j.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(i.a)({},n),!a){t.next=6;break}return t.next=4,e.ajax.put("/department_users",r,{setLoading:f,successTip:"\u4fee\u6539\u6210\u529f\uff01"});case 4:t.next=8;break;case 6:return t.next=8,e.ajax.post("/department_users",r,{setLoading:f,successTip:"\u4fee\u6539\u6210\u529f\uff01"});case 8:c();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[a,c,e.ajax]);Object(j.useEffect)((function(){Object(u.a)(s.a.mark((function a(){var n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.ajax.get("/department_users",{id:null===t||void 0===t?void 0:t.id},[],{setLoading:f});case 2:n=a.sent,h.setFieldsValue(n||{});case 4:case"end":return a.stop()}}),a)})))()}),[h,e.ajax,null===t||void 0===t?void 0:t.id]);var g={labelCol:{flex:"100px"}};return Object(p.jsx)(o.a,{form:h,onFinish:v,children:Object(p.jsxs)(b.k,{loading:x,okText:"\u4fdd\u5b58",okHtmlType:"submit",cancelText:"\u91cd\u7f6e",onCancel:function(){return h.resetFields()},children:[a?Object(p.jsx)(b.e,{hidden:!0,name:"id"}):null,Object(p.jsxs)(n.a,{children:[Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"select",label:"\u90e8\u95e8",name:"departmentId"}))}),Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"select",label:"\u7528\u6237",name:"userId",maxLength:36}))}),Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"input",label:"\u662f\u5426\u662f\u9886\u5bfc",name:"isLeader"}))}),Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"number",label:"\u6392\u5e8f",name:"order"}))})]})]})})}))}}]);