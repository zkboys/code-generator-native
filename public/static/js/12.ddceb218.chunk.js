(this.webpackJsonp_front=this.webpackJsonp_front||[]).push([[12],{1057:function(e,t,n){"use strict";n.r(t);n(342);var a=n(181),r=(n(88),n(27)),c=n(135),o=n(120),i=n(18),s=(n(217),n(104)),l=n(41),u=n.n(l),f=n(161),d=(n(250),n(125)),p=n(31),b=n(2),j=n.n(b),m=n(0),O=n(570),h=n(1122),v=n(1086),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},g=n(11),y=function(e,t){return m.createElement(g.a,Object.assign({},e,{ref:t,icon:x}))};y.displayName="FormOutlined";var w=m.forwardRef(y),k=n(21),C=n(249),A=n(184),I=n(1110),E=n.n(I),F=n(1121),T=n(575),_=n(121),S=n(6),V="single_form_values",L="single_data_source";t.default=Object(C.a)({path:"/",title:"\u9996\u9875"})((function(e){var t=Object(m.useState)(!1),n=Object(p.a)(t,2),l=n[0],b=n[1],x=Object(m.useState)([]),g=Object(p.a)(x,2),y=g[0],C=g[1],I=Object(m.useState)([]),P=Object(p.a)(I,2),z=P[0],q=P[1],M=Object(m.useState)([]),N=Object(p.a)(M,2),D=N[0],R=N[1],U=Object(m.useState)([]),B=Object(p.a)(U,2),Y=B[0],H=B[1],J=d.a.useForm(),Z=Object(p.a)(J,1)[0],G=Object(m.useCallback)(function(){var t=Object(f.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/db/tables",{dbUrl:n},{errorTip:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),K=Object(m.useCallback)(function(){var t=Object(f.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/db/tables/".concat(a),{dbUrl:n},{errorTip:!1,setLoading:b});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e.ajax]),$=Object(m.useCallback)(function(){var t=Object(f.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/moduleNames/".concat(n),null,{errorTip:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.ajax]),Q=Object(m.useCallback)(Object(f.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/templates",null,{errorTip:!1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),[e.ajax]),W=Object(m.useCallback)((function(e){C(e),k.M.local.setItem(L,e)}),[]),X=Object(m.useCallback)((function(e){var t=y.filter((function(t){return t.id!==e}));W(t)}),[y,W]),ee=[{title:"\u6ce8\u91ca",dataIndex:"comment",width:150},{title:"\u4e2d\u6587\u540d",dataIndex:"chinese",width:190,type:T.FIELD_EDIT_TYPES.input,required:!0},{title:"\u5217\u540d",dataIndex:"name",width:190,type:T.FIELD_EDIT_TYPES.input,required:!0},{title:"\u8868\u5355\u7c7b\u578b",dataIndex:"formType",width:190,type:T.FIELD_EDIT_TYPES.select,options:T.FORM_ELEMENT_OPTIONS},{title:"\u9009\u9879",dataIndex:"options",type:T.FIELD_EDIT_TYPES.tags,options:z},{title:"\u64cd\u4f5c",dataIndex:"operator",width:100,render:function(e,t){var n=t.id,a=t.chinese,r=[{label:"\u5220\u9664",color:"red",confirm:{title:'\u60a8\u786e\u5b9a\u5220\u9664"'.concat(a,'"?'),onConfirm:function(){return X(n)}}}];return Object(S.jsx)(k.l,{items:r})}}],te=Object(m.useCallback)(function(){var e=Object(f.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.target.value,e.next=4,G(a);case 4:r=e.sent,n=r.map((function(e){return{value:e.name,label:e.name}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n=[];case 11:R(n);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[G]),ne=Object(m.useCallback)(function(){var e=Object(f.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:if(a=e.sent,Z.setFieldsValue({moduleName:a["module-name"]}),e.prev=4,r=Z.getFieldValue("dbUrl")){e.next=8;break}return e.abrupt("return",s.a.info({title:"\u6e29\u99a8\u63d0\u793a",content:"\u8bf7\u5148\u8f93\u5165\u6b63\u786e\u7684\u6570\u636e\u5e93\u8fde\u63a5\uff01"}));case 8:return e.next=10,K(r,t);case 10:n=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),n=[];case 16:W(n.map((function(e){var t,n;return Object(i.a)({id:Object(F.a)(),formType:null===e||void 0===e||null===(t=e.types)||void 0===t?void 0:t.form,javaType:null===e||void 0===e||null===(n=e.types)||void 0===n?void 0:n.java},e)})));case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),[K,$,Z,W]),ae=Object(m.useCallback)((function(){}),[]),re=Object(m.useCallback)((function(){var e=Z.getFieldValue("files").reduce((function(e,t){var n,a=t.templateId,r=null===(n=Y.find((function(e){return e.value===a})))||void 0===n?void 0:n.record;return Array.from(new Set([].concat(Object(o.a)(e),Object(o.a)((null===r||void 0===r?void 0:r.fieldOptions)||[]))))}),[]);q(e)}),[Z,Y]),ce=Object(m.useCallback)((function(e,t){var n=Y.find((function(e){return e.value===t})).record,a=n.targetPath,r=n.options,c=n.fieldOptions,s=Z.getFieldValue("files"),l=Z.getFieldValue(["files",e]);l.targetPath=a,l.options=Object(o.a)(r),s[e]=l,Z.setFieldsValue({files:Object(o.a)(s)}),re();var u=y.map((function(e){var t=Array.from(new Set([].concat(Object(o.a)(e.options),Object(o.a)(c))));return Object(i.a)(Object(i.a)({},e),{},{options:t})}));W(u)}),[Z,re,Y,y,W]),oe=Object(m.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=y.length,n={id:Object(F.a)(),comment:"\u65b0\u589e\u5217".concat(t+1),chinese:"\u65b0\u589e\u5217".concat(t+1),field:"field".concat(t+1),formType:"input",options:Object(o.a)(z)};e?y.push(n):y.unshift(n),W(Object(o.a)(y))}),[y,z,W]),ie=Object(m.useCallback)((function(){}),[]),se=Object(m.useCallback)((function(){}),[]),le=Object(m.useCallback)((function(){setTimeout((function(){k.M.local.setItem(V,Z.getFieldsValue()),Object(_.f)()}))}),[Z]);Object(m.useEffect)((function(){Object(f.a)(u.a.mark((function e(){var t,n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=k.M.local.getItem(L),n=k.M.local.getItem(V)||{},Z.setFieldsValue(n),a=n.dbUrl,r=n.tableName,!a){e.next=7;break}return e.next=7,te({target:{value:a}});case 7:if(!r){e.next=10;break}return e.next=10,ne(r);case 10:re(),t&&W(t);case 12:case"end":return e.stop()}}),e)})))()}),[Z,te,W,ne,re]),Object(m.useEffect)((function(){Object(f.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:t=e.sent,n=t.map((function(e){return{record:e,value:e.id,label:e.name}})),H(n);case 5:case"end":return e.stop()}}),e)})))()}),[Q]),Object(m.useEffect)((function(){var e=y.filter((function(e){return!e.options}));null!==e&&void 0!==e&&e.length&&(e.forEach((function(e){return e.options=Object(o.a)(z)})),W(Object(o.a)(y)))}),[z,y,W]);var ue={};return Object(S.jsxs)(k.m,{loading:l,className:j()(E.a.root),children:[Object(S.jsxs)(d.a,{style:{marginBottom:8},form:Z,layout:"inline",initialValues:{files:[{}]},onValuesChange:le,className:j()(E.a.query),children:[Object(S.jsx)(k.e,Object(i.a)(Object(i.a)({},ue),{},{labelCol:{flex:"120px"},style:{width:300},align:"right",label:"\u6570\u636e\u5e93\u8fde\u63a5",name:"dbUrl",placeholder:"mysql://username:password@host:port/database",onChange:te,tooltip:"\u652f\u6301mysql\u3001oracle"})),Object(S.jsx)(k.e,Object(i.a)(Object(i.a)({},ue),{},{labelCol:{flex:"100px"},style:{width:300},type:"select",showSearch:!0,label:"\u6570\u636e\u5e93\u8868",name:"tableName",onChange:ne,options:D})),Object(S.jsx)(k.e,Object(i.a)(Object(i.a)({},ue),{},{labelCol:{flex:"91px"},style:{width:200},label:"\u6a21\u5757\u540d",name:"moduleName",placeholder:"\u6bd4\u5982\uff1auser-center",onChange:ae,required:!0})),Object(S.jsx)("div",{style:{width:"100%",marginTop:8},children:Object(S.jsx)(d.a.List,{name:"files",children:function(e,t){var n=t.add,a=t.remove;return Object(S.jsx)(S.Fragment,{children:e.map((function(t,o){var s=t.key,l=t.name,u=(t.isListField,Object(c.a)(t,["key","name","isListField"])),f=o%2?"#fff":"#eee",d=0===o,p=o+1,b=p;return d&&(b="\u6587\u4ef6".concat(p)),Object(S.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingTop:7,paddingLeft:30,backgroundColor:f},children:[Object(S.jsxs)("div",{style:{width:408,position:"relative"},children:[d&&Object(S.jsx)(r.a,{type:"primary",ghost:!0,shape:"circle",size:"small",style:{position:"absolute",top:4,zIndex:1},icon:Object(S.jsx)(O.a,{}),onClick:function(){n({}),re()}}),Object(S.jsx)(k.e,Object(i.a)(Object(i.a)(Object(i.a)({},ue),u),{},{labelCol:{flex:"90px"},style:{width:300},label:b,name:[l,"templateId"],required:!0,options:Y,placeholder:"\u8bf7\u9009\u62e9\u6a21\u677f",onChange:function(e){return ce(l,e)}}))]}),Object(S.jsx)(k.e,Object(i.a)(Object(i.a)(Object(i.a)({},ue),u),{},{style:{width:300},label:"\u76ee\u6807\u4f4d\u7f6e",name:[l,"targetPath"],required:!0,rules:[{validator:function(e,t){if(!t)return Promise.resolve();var n=Z.getFieldValue("files");return n.findIndex((function(e){return e.targetPath===t}))!==n.findLastIndex((function(e){return e.targetPath===t}))?Promise.reject("\u4e0d\u80fd\u4f7f\u7528\u76f8\u540c\u7684\u76ee\u6807\u6587\u4ef6\uff01\u8bf7\u4fee\u6539"):Promise.resolve()}}]})),Object(S.jsx)(k.e,{noStyle:!0,shouldUpdate:!0,children:function(e){var t,n=(0,e.getFieldValue)(["files",l,"templateId"]),a=null===(t=Y.find((function(e){return e.value===n})))||void 0===t?void 0:t.record,r=(null===a||void 0===a?void 0:a.options)||[];return Object(S.jsx)(k.e,Object(i.a)(Object(i.a)(Object(i.a)({},ue),u),{},{name:[l,"options"],children:Object(S.jsx)(A.g,{options:r})}))}}),(null===e||void 0===e?void 0:e.length)>1&&Object(S.jsx)(h.a,{style:{color:"red"},onClick:function(){a(l),re()}})]},s)}))})}})})]}),Object(S.jsxs)(a.b,{style:{marginBottom:8},children:[Object(S.jsx)(r.a,{icon:Object(S.jsx)(O.a,{}),type:"primary",onClick:function(){return oe()},children:"\u6dfb\u52a0\u4e00\u884c"}),Object(S.jsx)(r.a,{icon:Object(S.jsx)(v.a,{}),type:"primary",ghost:!0,onClick:function(){return ie()},children:"\u4ee3\u7801\u9884\u89c8"}),Object(S.jsx)(r.a,{icon:Object(S.jsx)(w,{}),onClick:function(){return se()},children:"\u5feb\u901f\u7f16\u8f91"})]}),Object(S.jsx)(A.b,{otherHeight:72,columns:ee,onAdd:oe,dataSource:y,onChange:W,footer:function(){return null}})]})}))},1110:function(e,t,n){var a=n(134),r=n(1111);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1};a(r,c);e.exports=r.locals||{}},1111:function(e,t,n){"use strict";n.r(t);var a=n(63),r=n.n(a)()(!0);r.push([e.i,".query_39zez .front-form-item {\n  margin-bottom: 6px;\n}\n.query_39zez .front-form-item-explain {\n  position: absolute;\n  margin-top: -4px;\n}\n","",{version:3,sources:["webpack://src/pages/home/style.less"],names:[],mappings:"AAKA;EAGY,kBAAA;AADZ;AAFA;EAOY,kBAAA;EACA,gBAAA;AAFZ",sourcesContent:['@import "src/theme.less";\n\n.root {\n}\n\n.query {\n    :global {\n        .@{ant-prefix}-form-item {\n            margin-bottom: 6px;\n        }\n\n        .@{ant-prefix}-form-item-explain {\n            position: absolute;\n            margin-top: -4px;\n        }\n    }\n}\n\n@packageName: front;'],sourceRoot:""}]),r.locals={antPrefix:"front",raLibPrefix:"front-ra",primaryColor:"#1890ff",query:"query_39zez"},t.default=r},1121:function(e,t,n){"use strict";var a,r=new Uint8Array(16);function c(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=function(e){return"string"===typeof e&&o.test(e)},s=[],l=0;l<256;++l)s.push((l+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!i(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var a=(e=e||{}).random||(e.rng||c)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return u(a)}},1122:function(e,t,n){"use strict";var a=n(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},c=n(11),o=function(e,t){return a.createElement(c.a,Object.assign({},e,{ref:t,icon:r}))};o.displayName="MinusCircleOutlined";t.a=a.forwardRef(o)}}]);
//# sourceMappingURL=12.ddceb218.chunk.js.map