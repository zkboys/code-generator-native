(this.webpackJsonp_front=this.webpackJsonp_front||[]).push([[9],{947:function(e,t,n){"use strict";n.r(t);n(372);var a=n(230),r=(n(987),n(983)),c=(n(113),n(35)),s=(n(374),n(185)),i=(n(199),n(99)),u=n(38),o=n.n(u),l=n(22),j=n(152),b=(n(371),n(229)),d=n(45),p=n(0),f=n(19),O=n(228),x=(n(955),n(957)),h=(n(956),n(958)),m=n(12),v=Object(O.a)({modal:{title:function(e){return e.isEdit?"\u4fee\u6539":"\u521b\u5efa"},width:"70%",top:50}})((function(e){var t=e.record,n=e.isEdit,a=e.onOk,r=Object(p.useState)(!1),c=Object(d.a)(r,2),s=c[0],i=c[1],u=b.a.useForm(),O=Object(d.a)(u,1)[0],v=Object(p.useCallback)(function(){var t=Object(j.a)(o.a.mark((function t(r){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(l.a)({},r),!n){t.next=6;break}return t.next=4,e.ajax.put("/users",c,{setLoading:i,successTip:"\u4fee\u6539\u6210\u529f\uff01"});case 4:t.next=8;break;case 6:return t.next=8,e.ajax.post("/users",c,{setLoading:i,successTip:"\u521b\u5efa\u6210\u529f\uff01"});case 8:a();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,a,e.ajax]);Object(p.useEffect)((function(){Object(j.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.ajax.get("/users",{id:null===t||void 0===t?void 0:t.id},[],{setLoading:i});case 2:a=n.sent,O.setFieldsValue(a||{});case 4:case"end":return n.stop()}}),n)})))()}),[O,e.ajax,null===t||void 0===t?void 0:t.id]);return Object(m.jsx)(b.a,{form:O,onFinish:v,children:Object(m.jsxs)(f.k,{loading:s,okText:"\u4fdd\u5b58",okHtmlType:"submit",cancelText:"\u91cd\u7f6e",onCancel:function(){return O.resetFields()},children:[n?Object(m.jsx)(f.e,{hidden:!0,name:"id"}):null,Object(m.jsx)(x.a,{children:Object(m.jsx)(h.a,{span:12,children:Object(m.jsx)(f.e,Object(l.a)(Object(l.a)({},{labelCol:{flex:"100px"}}),{},{type:"input",label:"\u65b0\u589e\u52171",name:"field1"}))})})]})})})),g=(n(978),n(986)),w=Object(O.a)({modal:{title:"\u8be6\u60c5",width:"70%",top:50}})((function(e){var t,n=e.record,a=e.onCancel,r=Object(p.useState)(!1),s=Object(d.a)(r,2),i=s[0],u=s[1],l=Object(p.useState)({}),b=Object(d.a)(l,2),O=b[0],x=b[1];return Object(p.useEffect)((function(){Object(j.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.get("/users",{id:null===n||void 0===n?void 0:n.id},[],{setLoading:u});case 2:a=t.sent,x(a||{});case 4:case"end":return t.stop()}}),t)})))()}),[e.ajax,null===n||void 0===n?void 0:n.id]),Object(m.jsx)(f.k,{bodyStyle:{padding:0},loading:i,footer:Object(m.jsx)(c.a,{onClick:a,children:"\u5173\u95ed"}),children:Object(m.jsx)(g.b,{bordered:!0,size:"small",labelStyle:{width:150},children:Object(m.jsx)(g.b.Item,{label:"\u65b0\u589e\u52171",children:null!==(t=O.field1)&&void 0!==t?t:"-"})})})}));t.default=Object(O.a)({path:"/users"})((function(e){var t=Object(p.useState)(!1),n=Object(d.a)(t,2),u=n[0],O=n[1],x=Object(p.useState)(1),h=Object(d.a)(x,2),g=h[0],k=h[1],y=Object(p.useState)(20),C=Object(d.a)(y,2),S=C[0],N=C[1],T=Object(p.useState)([]),F=Object(d.a)(T,2),L=F[0],z=F[1],E=Object(p.useState)(0),I=Object(d.a)(E,2),H=I[0],J=I[1],K=Object(p.useState)(null),P=Object(d.a)(K,2),_=P[0],R=P[1],U=Object(p.useState)(!1),V=Object(d.a)(U,2),q=V[0],A=V[1],B=Object(p.useState)(!1),D=Object(d.a)(B,2),G=D[0],M=D[1],Q=Object(p.useState)([]),W=Object(d.a)(Q,2),X=W[0],Y=W[1],Z=Object(p.useState)(!1),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ne=b.a.useForm(),ae=Object(d.a)(ne,1)[0],re=[{title:"\u65b0\u589e\u52171",dataIndex:"field1"},{title:"\u64cd\u4f5c",dataIndex:"operator",width:150,render:function(e,t){var n=t.id,a=t.name,r=[{label:"\u7f16\u8f91",onClick:function(){R(t),A(!0)}},{label:"\u8be6\u60c5",onClick:function(){R(t),M(!0)}},{label:"\u5220\u9664",color:"red",confirm:{title:"\u60a8\u786e\u5b9a\u5220\u9664\u300c".concat(a,"\u300d\u5417\uff1f"),onConfirm:function(){return le(n)}}}];return Object(m.jsx)(f.l,{items:r})}}],ce=Object(p.useCallback)(Object(j.a)(o.a.mark((function t(){var n,a,r,c,s,i,u=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},t.next=3,ae.validateFields();case 3:return a=t.sent,r=Object(l.a)(Object(l.a)({},a),{},{pageNum:n.pageNum||g,pageSize:n.pageSize||S}),t.next=7,e.ajax.get("/users",r,{setLoading:O});case 7:c=t.sent,s=(null===c||void 0===c?void 0:c.content)||[],i=(null===c||void 0===c?void 0:c.totalElements)||0,z(s),J(i);case 12:case"end":return t.stop()}}),t)}))),[ae,g,S,e.ajax]),se=Object(p.useCallback)((function(){R(null),A(!0)}),[]),ie=Object(p.useCallback)(Object(j.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==X&&void 0!==X&&X.length){t.next=2;break}return t.abrupt("return",i.a.info({title:"\u6e29\u99a8\u63d0\u793a",content:"\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u6570\u636e\uff01"}));case 2:return t.next=4,e.ajax.del("/users",{ids:X},{setLoading:O,successTip:"\u5220\u9664\u6210\u529f\uff01"});case 4:return t.next=6,ce();case 6:case"end":return t.stop()}}),t)}))),[ce,e.ajax,X]),ue=Object(p.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("uploading"===t.file.status&&te(!0),"done"!==t.file.status){e.next=6;break}return te(!1),s.a.success({message:"\u5bfc\u5165\u6210\u529f\uff01",duration:2}),e.next=6,ce();case 6:"error"===t.file.status&&(te(!1),s.a.error({message:"\u5bfc\u5165\u5931\u8d25\uff01",duration:2}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ce]),oe=Object(p.useCallback)(Object(j.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.validateFields();case 2:return n=t.sent,t.next=5,e.ajax.download("/users/export",n);case 5:case"end":return t.stop()}}),t)}))),[ae,e.ajax]),le=Object(p.useCallback)(function(){var t=Object(j.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.del("/users/".concat(n),null,{setLoading:O,successTip:"\u5220\u9664\u6210\u529f\uff01"});case 2:return t.next=4,ce();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[ce,e.ajax]);Object(p.useEffect)((function(){Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce({pageNum:1});case 2:case"end":return e.stop()}}),e)})))()}),[]);return Object(m.jsxs)(f.m,{loading:u||ee,children:[Object(m.jsx)(f.o,{children:Object(m.jsxs)(b.a,{layout:"inline",form:ae,onFinish:Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(1),e.next=3,ce({pageNum:1});case 3:case"end":return e.stop()}}),e)}))),children:[Object(m.jsx)(f.e,Object(l.a)(Object(l.a)({},{wrapperCol:{style:{width:200}}}),{},{type:"input",label:"\u65b0\u589e\u52171",name:"field1"})),Object(m.jsx)(f.e,{children:Object(m.jsxs)(a.b,{children:[Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"}),Object(m.jsx)(c.a,{htmlType:"reset",children:"\u91cd\u7f6e"}),Object(m.jsx)(c.a,{type:"primary",onClick:se,children:"\u6dfb\u52a0"}),Object(m.jsx)(c.a,{type:"primary",danger:!0,onClick:ie,children:"\u6279\u91cf\u5220\u9664"}),Object(m.jsx)(r.a,{name:"file",accept:".xlsx,.xls",action:"/api/users/import",showUploadList:!1,headers:{},onChange:ue,children:Object(m.jsx)(c.a,{type:"primary",ghost:!0,children:"\u5bfc\u5165"})}),Object(m.jsx)(c.a,{onClick:oe,children:"\u5bfc\u51fa"})]})})]})}),Object(m.jsx)(f.p,{serialNumber:!0,pageNum:g,pageSize:S,fitHeight:!0,dataSource:L,columns:re,rowKey:"id",rowSelection:{selectedRowKeys:X,onChange:function(e){return Y(e)}}}),Object(m.jsx)(f.n,{total:H,pageNum:g,pageSize:S,onPageNumChange:function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t),e.next=3,ce({pageNum:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPageSizeChange:function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(1),N(t),e.next=4,ce({pageNum:1,pageSize:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(m.jsx)(v,{visible:q,isEdit:!!_,record:_,onOk:Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.next=3,ce();case 3:case"end":return e.stop()}}),e)}))),onCancel:function(){return A(!1)}}),Object(m.jsx)(w,{visible:G,record:_,onCancel:function(){return M(!1)}})]})}))}}]);