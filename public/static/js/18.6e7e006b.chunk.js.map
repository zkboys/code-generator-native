{"version":3,"sources":["pages/local/edit-table/index.jsx"],"names":["EditTable","config","path","state","dataSource","loading","editRecord","handleShowEdit","setState","handleSave","index","findIndex","item","id","splice","handleInputChange","e","key","value","target","nextRecord","this","setTimeout","Array","from","length","map","_","number","name","age","style","width","tdStyle","textAlign","type","onChange","onBlur","onClick","React","Component"],"mappings":"uPAIqBA,EADpBC,YAAO,CAAEC,KAAM,e,+MAGZC,MAAQ,CAEJC,WAAY,GAEZC,SAAS,EAETC,WAAY,M,EAiChBC,eAAiB,SAACD,GACd,EAAKE,SAAS,CAAEF,gB,EAGpBG,WAAa,WAAO,IAAD,EACoB,EAAKN,MAAhCG,EADO,EACPA,WAAYF,EADL,EACKA,WAEdM,EAAQN,EAAWO,WAAU,SAAAC,GAAI,OAAIA,EAAKC,KAAOP,EAAWO,MAClET,EAAWU,OAAOJ,EAAO,EAAGJ,GAE5B,EAAKE,SAAS,CAAEJ,WAAW,YAAKA,GAAaE,WAAY,Q,EAG7DS,kBAAoB,SAACC,EAAGC,GAAS,IACrBX,EAAe,EAAKH,MAApBG,WACAY,EAAUF,EAAEG,OAAZD,MACFE,EAAU,2BACTd,GADS,kBAEXW,EAAMC,IAEX,EAAKV,SAAS,CAAEF,WAAYc,K,uDAlDhC,WAAqB,IAAD,OAGhBC,KAAKb,SAAS,CAAEH,SAAS,IAEzBiB,YAAW,WAEP,EAAKd,SAAS,CACVJ,WAAYmB,MAAMC,KAAK,CAAEC,OAAQ,KAAMC,KAAI,SAACC,EAAGjB,GAC3C,IAAMkB,EAASlB,EAAQ,EACvB,MAAO,CACHG,GAAIe,EACJC,KAAK,eAAD,OAAOD,GACXE,IAAc,GAATF,EAAcA,QAa/B,EAAKpB,SAAS,CAAEH,SAAS,MAC1B,O,oBA0BP,WAAU,IAAD,SACuCgB,KAAKlB,MAAzCC,EADH,EACGA,WAAYC,EADf,EACeA,QAASC,EADxB,EACwBA,WAE7B,OAAID,EAAgB,6CAGhB,8BACI,wBAAO0B,MAAO,CAAEC,MAAO,QAAvB,UACI,gCACA,+BACI,oCACA,8CACA,8CACA,mDAIJ,gCACC5B,EAAWsB,KAAI,SAAAd,GAAS,IACbC,EAAkBD,EAAlBC,GAAIgB,EAAcjB,EAAdiB,KAAMC,EAAQlB,EAARkB,IACZG,EAAU,CAAEC,UAAW,UAE7B,IAAc,OAAV5B,QAAU,IAAVA,OAAA,EAAAA,EAAYO,MAAOA,EAAI,CAAC,IAChBA,EAAkBP,EAAlBO,GAAIgB,EAAcvB,EAAduB,KAAMC,EAAQxB,EAARwB,IAClB,OACI,+BACI,oBAAIC,MAAOE,EAAX,SAAqBpB,IACrB,oBAAIkB,MAAOE,EAAX,SACI,uBACIE,KAAK,OACLjB,MAAOW,EACPO,SAAU,SAAApB,GAAC,OAAI,EAAKD,kBAAkBC,EAAG,SACzCqB,OAAQ,EAAK5B,eAGrB,oBAAIsB,MAAOE,EAAX,SACI,uBACIE,KAAK,OACLjB,MAAOY,EACPM,SAAU,SAAApB,GAAC,OAAI,EAAKD,kBAAkBC,EAAG,QACzCqB,OAAQ,EAAK5B,eAGrB,oBAAIsB,MAAOE,EAAX,SACI,mBAAGK,QAAS,EAAK7B,WAAjB,8BAnBCI,GAyBjB,OACI,+BACI,oBAAIkB,MAAOE,EAAX,SAAqBpB,IACrB,oBAAIkB,MAAOE,EAAX,SAAqBJ,IACrB,oBAAIE,MAAOE,EAAX,SAAqBH,IACrB,oBAAIC,MAAOE,EAAX,SACI,mBAAGK,QAAS,kBAAM,EAAK/B,eAAeK,IAAtC,8BALCC,iB,GAnHE0B,IAAMC,a","file":"static/js/18.6e7e006b.chunk.js","sourcesContent":["import React from 'react';\nimport config from 'src/commons/config-hoc';\n\n@config({ path: '/edit/table' })\nexport default class EditTable extends React.Component {\n    // 初始化state\n    state = {\n        // 表格数据\n        dataSource: [],\n        // 加载\n        loading: false,\n        // 编辑保存的数据\n        editRecord: null,\n    };\n\n    componentDidMount() {\n        // 加载表格数据\n\n        this.setState({ loading: true });\n\n        setTimeout(() => {\n\n            this.setState({\n                dataSource: Array.from({ length: 10 }).map((_, index) => {\n                    const number = index + 1;\n                    return {\n                        id: number,\n                        name: `张三${number}`,\n                        age: number * 10 + number,\n                    };\n                }),\n\n                // dataSource: [\n                //     { id: 1, name: '1', age: 11 },\n                //     { id: 2, name: '2', age: 22 },\n                //     { id: 3, name: '3', age: 33 },\n                //     { id: 4, name: '4', age: 44 },\n                //     { id: 5, name: '5', age: 55 },\n                // ],\n            });\n\n            this.setState({ loading: false });\n        }, 1000);\n    }\n\n    handleShowEdit = (editRecord) => {\n        this.setState({ editRecord });\n    };\n\n    handleSave = () => {\n        const { editRecord, dataSource } = this.state;\n\n        const index = dataSource.findIndex(item => item.id === editRecord.id);\n        dataSource.splice(index, 1, editRecord);\n\n        this.setState({ dataSource: [...dataSource], editRecord: null });\n    };\n\n    handleInputChange = (e, key) => {\n        const { editRecord } = this.state;\n        const { value } = e.target;\n        const nextRecord = {\n            ...editRecord,\n            [key]: value,\n        };\n        this.setState({ editRecord: nextRecord });\n    };\n\n    render() {\n        const { dataSource, loading, editRecord } = this.state;\n\n        if (loading) return '加载中。。。。';\n\n        return (\n            <div>\n                <table style={{ width: '100%' }}>\n                    <thead>\n                    <tr>\n                        <th>id</th>\n                        <th>姓名</th>\n                        <th>年龄</th>\n                        <th>操作</th>\n                    </tr>\n                    </thead>\n\n                    <tbody>\n                    {dataSource.map(item => {\n                        const { id, name, age } = item;\n                        const tdStyle = { textAlign: 'center' };\n\n                        if (editRecord?.id === id) {\n                            const { id, name, age } = editRecord;\n                            return (\n                                <tr key={id}>\n                                    <td style={tdStyle}>{id}</td>\n                                    <td style={tdStyle}>\n                                        <input\n                                            type=\"text\"\n                                            value={name}\n                                            onChange={e => this.handleInputChange(e, 'name')}\n                                            onBlur={this.handleSave}\n                                        />\n                                    </td>\n                                    <td style={tdStyle}>\n                                        <input\n                                            type=\"text\"\n                                            value={age}\n                                            onChange={e => this.handleInputChange(e, 'age')}\n                                            onBlur={this.handleSave}\n                                        />\n                                    </td>\n                                    <td style={tdStyle}>\n                                        <a onClick={this.handleSave}>保存</a>\n                                    </td>\n                                </tr>\n                            );\n                        }\n\n                        return (\n                            <tr key={id}>\n                                <td style={tdStyle}>{id}</td>\n                                <td style={tdStyle}>{name}</td>\n                                <td style={tdStyle}>{age}</td>\n                                <td style={tdStyle}>\n                                    <a onClick={() => this.handleShowEdit(item)}>编辑</a>\n                                </td>\n                            </tr>\n                        );\n                    })}\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n}\n"],"sourceRoot":""}