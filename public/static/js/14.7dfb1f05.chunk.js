(this.webpackJsonp_front=this.webpackJsonp_front||[]).push([[14],{956:function(e,t,a){"use strict";a.r(t);a(323);var n=a(175),r=(a(113),a(36)),c=a(38),s=a.n(c),i=a(21),u=a(155),o=(a(322),a(156)),j=a(39),l=a(0),b=a(19),d=a(234),p=a(989),O=a(11);t.default=Object(d.a)({path:"/department_users"})((function(e){var t=Object(l.useState)(!1),a=Object(j.a)(t,2),c=a[0],d=a[1],x=Object(l.useState)(1),f=Object(j.a)(x,2),m=f[0],h=f[1],v=Object(l.useState)(20),g=Object(j.a)(v,2),w=g[0],k=g[1],y=Object(l.useState)([]),S=Object(j.a)(y,2),C=S[0],I=S[1],N=Object(l.useState)(0),L=Object(j.a)(N,2),T=L[0],_=L[1],F=Object(l.useState)(null),z=Object(j.a)(F,2),E=z[0],H=z[1],J=Object(l.useState)(!1),P=Object(j.a)(J,2),K=P[0],V=P[1],q=o.a.useForm(),A=Object(j.a)(q,1)[0],B=[{title:"\u90e8\u95e8",dataIndex:"departmentId"},{title:"\u7528\u6237",dataIndex:"userId"},{title:"\u662f\u5426\u662f\u9886\u5bfc",dataIndex:"isLeader"},{title:"\u6392\u5e8f",dataIndex:"order"},{title:"\u64cd\u4f5c",dataIndex:"operator",width:100,render:function(e,t){var a=t.id,n=t.name,r=[{label:"\u7f16\u8f91",onClick:function(){H(t),V(!0)}},{label:"\u5220\u9664",color:"red",confirm:{title:"\u60a8\u786e\u5b9a\u5220\u9664\u300c".concat(n,"\u300d\u5417\uff1f"),onConfirm:function(){return M(a)}}}];return Object(O.jsx)(b.l,{items:r})}}],D=Object(l.useCallback)(Object(u.a)(s.a.mark((function t(){var a,n,r,c,u,o,j=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.length>0&&void 0!==j[0]?j[0]:{},t.next=3,A.validateFields();case 3:return n=t.sent,r=Object(i.a)(Object(i.a)({},n),{},{pageNum:a.pageNum||m,pageSize:a.pageSize||w}),t.next=7,e.ajax.get("/department_users",r,{setLoading:d});case 7:c=t.sent,u=(null===c||void 0===c?void 0:c.content)||[{id:1},{id:2}],o=(null===c||void 0===c?void 0:c.totalElements)||0,I(u),_(o);case 12:case"end":return t.stop()}}),t)}))),[A,m,w,e.ajax]),G=Object(l.useCallback)((function(){H(null),V(!0)}),[]),M=Object(l.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ajax.del("/department_users/".concat(a),null,{setLoading:d,successTip:"\u5220\u9664\u6210\u529f\uff01"});case 2:return t.next=4,D();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[D,e.ajax]);Object(l.useEffect)((function(){Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({pageNum:1});case 2:case"end":return e.stop()}}),e)})))()}),[]);var Q={wrapperCol:{style:{width:200}}};return Object(O.jsxs)(b.m,{loading:c,children:[Object(O.jsx)(b.o,{children:Object(O.jsxs)(o.a,{layout:"inline",form:A,onFinish:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(1),e.next=3,D({pageNum:1});case 3:case"end":return e.stop()}}),e)}))),children:[Object(O.jsx)(b.e,Object(i.a)(Object(i.a)({},Q),{},{type:"select",label:"\u90e8\u95e8",name:"departmentId"})),Object(O.jsx)(b.e,Object(i.a)(Object(i.a)({},Q),{},{type:"select",label:"\u7528\u6237",name:"userId"})),Object(O.jsx)(b.e,{children:Object(O.jsxs)(n.b,{children:[Object(O.jsx)(r.a,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"}),Object(O.jsx)(r.a,{htmlType:"reset",children:"\u91cd\u7f6e"}),Object(O.jsx)(r.a,{type:"primary",onClick:G,children:"\u6dfb\u52a0"})]})})]})}),Object(O.jsx)(b.p,{pageNum:m,pageSize:w,fitHeight:!0,dataSource:C,columns:B,rowKey:"id"}),Object(O.jsx)(b.n,{total:T,pageNum:m,pageSize:w,onPageNumChange:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(t),e.next=3,D({pageNum:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onPageSizeChange:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(1),k(t),e.next=4,D({pageNum:1,pageSize:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(O.jsx)(p.a,{visible:K,isEdit:!!E,record:E,onOk:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!1),e.next=3,D();case 3:case"end":return e.stop()}}),e)}))),onCancel:function(){return V(!1)}})]})}))},973:function(e,t,a){"use strict";a(37),a(533)},974:function(e,t,a){"use strict";a(37),a(533)},975:function(e,t,a){"use strict";var n=a(504);t.a=n.a},976:function(e,t,a){"use strict";var n=a(293);t.a=n.a},989:function(e,t,a){"use strict";a(973);var n=a(975),r=(a(974),a(976)),c=a(38),s=a.n(c),i=a(21),u=a(155),o=(a(322),a(156)),j=a(39),l=a(0),b=a(19),d=a(234),p=a(11);t.a=Object(d.a)({modal:{title:function(e){return e.isEdit?"\u7f16\u8f91":"\u521b\u5efa"},width:"70%",top:50}})((function(e){var t=e.record,a=e.isEdit,c=e.onOk,d=Object(l.useState)(!1),O=Object(j.a)(d,2),x=O[0],f=O[1],m=o.a.useForm(),h=Object(j.a)(m,1)[0],v=Object(l.useCallback)(function(){var t=Object(u.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(i.a)({},n),!a){t.next=6;break}return t.next=4,e.ajax.put("/department_users",r,{setLoading:f,successTip:"\u4fee\u6539\u6210\u529f\uff01"});case 4:t.next=8;break;case 6:return t.next=8,e.ajax.post("/department_users",r,{setLoading:f,successTip:"\u4fee\u6539\u6210\u529f\uff01"});case 8:c();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[a,c,e.ajax]);Object(l.useEffect)((function(){Object(u.a)(s.a.mark((function a(){var n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.ajax.get("/department_users",{id:null===t||void 0===t?void 0:t.id},[],{setLoading:f});case 2:n=a.sent,h.setFieldsValue(n||{});case 4:case"end":return a.stop()}}),a)})))()}),[h,e.ajax,null===t||void 0===t?void 0:t.id]);var g={labelCol:{flex:"100px"}};return Object(p.jsx)(o.a,{form:h,onFinish:v,children:Object(p.jsxs)(b.k,{loading:x,okText:"\u4fdd\u5b58",okHtmlType:"submit",cancelText:"\u91cd\u7f6e",onCancel:function(){return h.resetFields()},children:[a?Object(p.jsx)(b.e,{hidden:!0,name:"id"}):null,Object(p.jsxs)(n.a,{children:[Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"select",label:"\u90e8\u95e8",name:"departmentId"}))}),Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"select",label:"\u7528\u6237",name:"userId",maxLength:36}))}),Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"input",label:"\u662f\u5426\u662f\u9886\u5bfc",name:"isLeader"}))}),Object(p.jsx)(r.a,{span:12,children:Object(p.jsx)(b.e,Object(i.a)(Object(i.a)({},g),{},{type:"number",label:"\u6392\u5e8f",name:"order"}))})]})]})})}))}}]);